{"version":3,"file":"chartogram.js","sources":["../modules/utility.js","../modules/Tooltip.js","../modules/Charts.js","../modules/Timeline.js","../modules/Togglers.js","../modules/Transition.js","../modules/Chartogram.js","../modules/index.js"],"sourcesContent":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nexport function clearElement(element) {\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n}\nexport function commaJoin(a, b) {\n  return a.map(function (ai, i) {\n    return \"\".concat(ai, \",\").concat(b[i]);\n  });\n}\nexport function roundNumber(n, count, precision) {\n  var precisionFactor = precision && Math.pow(10, precision);\n\n  if (precisionFactor) {\n    n *= precisionFactor;\n  }\n\n  var delta = n / count;\n  delta = round(delta);\n\n  if (precisionFactor) {\n    delta /= precisionFactor;\n  }\n\n  return delta * count;\n}\n\nfunction round(x) {\n  var maxDigits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  var factor = 1;\n  var digitCount = getDigitCount(x);\n\n  if (digitCount > maxDigits) {\n    factor = Math.pow(10, digitCount - maxDigits);\n    x /= factor;\n  }\n\n  return roundDecimal(x) * factor;\n}\n\nvar ROUND_DECIMAL_HIGH_FACTOR = 1.08;\nvar ROUND_DECIMAL_LOW_FACTOR = 1.06;\n\nfunction roundDecimal(x) {\n  x = Math.round(x);\n  var rounded = roundDecimalBy(x, 10);\n\n  if (rounded !== x) {\n    return rounded;\n  }\n\n  rounded = roundDecimalBy(x, 5);\n\n  if (rounded !== x) {\n    return rounded;\n  }\n\n  rounded = roundDecimalBy(x, 2);\n\n  if (rounded !== x) {\n    return rounded;\n  }\n\n  return x;\n}\n\nfunction roundDecimalBy(x, factor) {\n  var remainder = x % factor;\n\n  if (remainder < factor / 2) {\n    if (x > factor && x / (x - remainder) < ROUND_DECIMAL_LOW_FACTOR) {\n      x -= remainder;\n    }\n  } else {\n    if ((factor - remainder) / x < ROUND_DECIMAL_HIGH_FACTOR - 1) {\n      x += factor - remainder;\n    }\n  }\n\n  return x;\n}\n\nexport function divideInterval(min, max, GAUGE_TICK_MARKS_COUNT) {\n  var points = new Array(GAUGE_TICK_MARKS_COUNT);\n  var i = 0;\n\n  while (i < GAUGE_TICK_MARKS_COUNT) {\n    points[i] = min + i * (max - min) / (GAUGE_TICK_MARKS_COUNT - 1);\n    i++;\n  }\n\n  return points;\n}\nexport function throttle(func, interval) {\n  var timeout;\n  var executedAt = 0;\n\n  var scheduled = function scheduled() {\n    timeout = undefined;\n    executedAt = Date.now();\n    func();\n  };\n\n  return function () {\n    var now = Date.now();\n    var remaining = interval - (now - executedAt);\n\n    if (remaining <= 0) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = undefined;\n      }\n\n      executedAt = now;\n      func();\n    } else if (!timeout) {\n      timeout = setTimeout(scheduled, remaining);\n    }\n  };\n}\nexport function simplifyGraph(x, y, maxPoints) {\n  var yMax = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Math.max.apply(Math, _toConsumableArray(y));\n  var threshold = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0.025;\n  var i = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  var _x = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : new Array(x.length);\n\n  var _y = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : new Array(x.length);\n\n  var _i = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n\n  if (i + 2 > x.length - 1) {\n    while (i < y.length) {\n      _x[_i] = x[i];\n      _y[_i] = y[i];\n      _i++;\n      i++;\n    }\n\n    _x = _x.slice(0, _i);\n    _y = _y.slice(0, _i);\n\n    if (_x.length <= maxPoints) {\n      return [_x, _y];\n    } else {\n      if (x.length / _x.length < 1.1) {\n        threshold = Math.min(threshold + 0.025, 1);\n      }\n\n      return simplifyGraph(_x, _y, maxPoints, yMax, threshold);\n    }\n  }\n\n  var y0 = (y[i + 2] + y[i]) / 2;\n\n  if (Math.abs(y0 - y[i + 1]) / yMax < threshold) {\n    _x[_i] = x[i];\n    _x[_i + 1] = x[i + 2];\n    _y[_i] = y[i];\n    _y[_i + 1] = y[i + 2];\n    return simplifyGraph(x, y, maxPoints, yMax, threshold, i + 2, _x, _y, _i + 1);\n  } else {\n    _x[_i] = x[i];\n    _x[_i + 1] = x[i + 1];\n    _x[_i + 2] = x[i + 2];\n    _y[_i] = y[i];\n    _y[_i + 1] = y[i + 1];\n    _y[_i + 2] = y[i + 2];\n    return simplifyGraph(x, y, maxPoints, yMax, threshold, i + 2, _x, _y, _i + 2);\n  }\n}\nexport function setUpDrag(element, onDragStart, onDrag) {\n  function onTouchMove(event) {\n    onDrag(event.changedTouches[0].clientX, event.changedTouches[0].clientY);\n  }\n\n  function onPointerMove(event) {\n    onDrag(event.clientX, event.clientY);\n  }\n\n  function onDragStop() {\n    window.removeEventListener('pointermove', onPointerMove);\n    window.removeEventListener('touchmove', onTouchMove);\n    window.removeEventListener('pointerup', onDragStop);\n    window.removeEventListener('pointercancel', onDragStop);\n    window.removeEventListener('touchend', onDragStop);\n    window.removeEventListener('touchcancel', onDragStop);\n  }\n\n  function onTouchStart(event) {\n    // Ignore multitouch.\n    if (event.touches.length > 1) {\n      // Reset.\n      return onDragStop();\n    }\n\n    onDragStart(event.changedTouches[0].clientX, event.changedTouches[0].clientY);\n    window.addEventListener('touchmove', onTouchMove);\n    window.addEventListener('touchend', onDragStop);\n    window.addEventListener('touchcancel', onDragStop);\n  } // Safari doesn't support pointer events.\n  // https://caniuse.com/#feat=pointer\n\n\n  element.addEventListener('touchstart', onTouchStart);\n\n  function onPointerDown(event) {\n    onDragStart(event.clientX, event.clientY);\n    window.addEventListener('pointermove', onPointerMove);\n    window.addEventListener('pointerup', onDragStop);\n    window.addEventListener('pointercancel', onDragStop);\n  }\n\n  element.addEventListener('pointerdown', onPointerDown);\n  return function () {\n    onDragStop();\n    element.removeEventListener(onPointerDown);\n    element.removeEventListener(onTouchStart);\n  };\n}\nexport function setUpTouchMove(element, _onTrackStart, _onTrack, _onTrackStop) {\n  var elementBounds;\n\n  function onTrack(x, y) {\n    _onTrack(x, y, elementBounds);\n  }\n\n  function onTrackStart() {\n    elementBounds = element.getBoundingClientRect();\n\n    _onTrackStart();\n  }\n\n  function onTouchStart(event) {\n    // Ignore multitouch.\n    if (event.touches.length > 1) {\n      // Reset.\n      return onTrackStop();\n    }\n\n    onTrackStart();\n    element.addEventListener('touchend', onTrackStop);\n    element.addEventListener('touchmove', onTouchMove);\n    element.addEventListener('touchend', onTrackStop);\n    element.addEventListener('touchcancel', onTrackStop);\n    onTouchMove(event);\n  } // Safari doesn't support pointer events.\n  // https://caniuse.com/#feat=pointer\n\n\n  element.addEventListener('touchstart', onTouchStart);\n\n  function onTouchMove(event) {\n    var x = event.changedTouches[0].clientX;\n    var y = event.changedTouches[0].clientY; // Emulate 'pointerleave' behavior.\n\n    if (x < elementBounds.left || x > elementBounds.left + elementBounds.width || y < elementBounds.top || y > elementBounds.top + elementBounds.height) {\n      onTrackStop();\n    } else {\n      onTrack(x, y);\n    }\n  }\n\n  function onPointerMove(event) {\n    onTrack(event.clientX, event.clientY);\n  }\n\n  function onTrackStop() {\n    element.removeEventListener('pointermove', onPointerMove);\n    element.removeEventListener('pointerleave', onTrackStop);\n    element.removeEventListener('pointercancel', onTrackStop);\n    element.removeEventListener('touchmove', onTouchMove);\n    element.removeEventListener('touchend', onTrackStop);\n    element.removeEventListener('touchcancel', onTrackStop);\n\n    _onTrackStop();\n  }\n\n  function onPointerEnter() {\n    onTrackStart();\n    element.addEventListener('pointermove', onPointerMove);\n    element.addEventListener('pointerleave', onTrackStop);\n    element.addEventListener('pointercancel', onTrackStop);\n  }\n\n  element.addEventListener('pointerenter', onPointerEnter);\n  return function () {\n    onTrackStop();\n    element.removeEventListener(onPointerEnter);\n    element.removeEventListener(onTouchStart);\n  };\n} // https://stackoverflow.com/questions/14879691/get-number-of-digits-with-javascript/28203456#28203456\n\nfunction getDigitCount(x) {\n  return (Math.log10((x ^ x >> 31) - (x >> 31)) | 0) + 1; // return Math.max(Math.floor(Math.log10(Math.abs(x))), 0) + 1\n}\n//# sourceMappingURL=utility.js.map","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { setUpTouchMove } from './utility';\nvar SVG_XMLNS = 'http://www.w3.org/2000/svg';\n\nvar Tooltip =\n/*#__PURE__*/\nfunction () {\n  function Tooltip(props) {\n    var _this = this;\n\n    _classCallCheck(this, Tooltip);\n\n    _defineProperty(this, \"setUpListener\", function () {\n      var canvas = _this.props.canvas;\n      setUpTouchMove(canvas, function () {}, _this.onTrack, function () {\n        return _this.unmount();\n      });\n    });\n\n    _defineProperty(this, \"onTrack\", function (screenX, screenY, canvasDimensions) {\n      var _this$props = _this.props,\n          minX = _this$props.minX,\n          maxX = _this$props.maxX,\n          xPoints = _this$props.xPoints;\n      var xScreenRatio = (screenX - canvasDimensions.left) / canvasDimensions.width;\n      var xPoint = minX + xScreenRatio * (maxX - minX);\n      var xHigherIndex = xPoints.findIndex(function (_) {\n        return _ >= xPoint;\n      });\n      var xLowerIndex = xHigherIndex - 1;\n\n      if (xHigherIndex < 0 || xHigherIndex >= xPoints.length) {\n        xHigherIndex = -1;\n      }\n\n      if (xLowerIndex < 0 || xLowerIndex >= xPoints.length) {\n        xLowerIndex = -1;\n      }\n\n      var xIndex;\n\n      if (xHigherIndex < 0) {\n        if (xLowerIndex < 0) {\n          return _this.unmount();\n        } else {\n          xIndex = xLowerIndex;\n        }\n      } else {\n        if (xLowerIndex < 0) {\n          xIndex = xHigherIndex;\n        } else {\n          var xLower = xPoints[xLowerIndex];\n          var xHigher = xPoints[xHigherIndex];\n          var deltaLower = xPoint - xLower;\n          var deltaHigher = xHigher - xPoint;\n          xIndex = deltaLower > deltaHigher ? xHigherIndex : xLowerIndex;\n        }\n      }\n\n      var x = xPoints[xIndex];\n\n      if (x !== _this.tooltipForX) {\n        _this.tooltipForX = x;\n\n        if (!_this.tooltip) {\n          _this.mount();\n        }\n\n        _this.updateTooltip(x, xIndex, canvasDimensions.width);\n      }\n    });\n\n    _defineProperty(this, \"unmountLine\", function () {\n      var canvas = _this.props.canvas;\n      canvas.removeChild(_this.line);\n      _this.line = undefined;\n    });\n\n    _defineProperty(this, \"mountPoints\", function () {\n      var pointsContainer = _this.props.pointsContainer;\n      _this.points = _this.renderPoints();\n\n      for (var _iterator = _this.points, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var point = _ref;\n        pointsContainer.appendChild(point);\n      }\n    });\n\n    _defineProperty(this, \"unmountPoints\", function () {\n      var pointsContainer = _this.props.pointsContainer;\n\n      for (var _iterator2 = _this.points, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) break;\n          _ref2 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) break;\n          _ref2 = _i2.value;\n        }\n\n        var point = _ref2;\n        pointsContainer.removeChild(point);\n      }\n\n      _this.points = undefined;\n    });\n\n    _defineProperty(this, \"updateLinePosition\", function (x) {\n      if (!_this.isLineRendered()) {\n        _this.mountLine();\n      }\n\n      var _this$props2 = _this.props,\n          canvasWidth = _this$props2.canvasWidth,\n          aspectRatio = _this$props2.aspectRatio,\n          fixSvgCoordinate = _this$props2.fixSvgCoordinate,\n          mapX = _this$props2.mapX;\n\n      _this.line.setAttribute('x1', fixSvgCoordinate(mapX(x)));\n\n      _this.line.setAttribute('x2', fixSvgCoordinate(mapX(x)));\n\n      _this.line.setAttribute('y1', 0);\n\n      _this.line.setAttribute('y2', '100%');\n    });\n\n    _defineProperty(this, \"updatePointPositions\", function (xIndex, xRatio) {\n      var _this$props3 = _this.props,\n          maxY = _this$props3.maxY,\n          y = _this$props3.y;\n      var i = 0;\n      var j = 0;\n\n      while (i < y.length) {\n        if (y[i].isShown) {\n          var point = _this.points[j];\n          var _y = y[i].points[xIndex];\n          var yRatio = _y / maxY;\n          point.style.left = \"\".concat(xRatio * 100, \"%\");\n          point.style.bottom = \"\".concat(yRatio * 100, \"%\");\n          j++;\n        }\n\n        i++;\n      }\n    });\n\n    this.props = props;\n  }\n\n  _createClass(Tooltip, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.unlisten = this.setUpListener();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unlisten();\n      this.unmount();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {// Ignored.\n    }\n  }, {\n    key: \"mount\",\n    value: function mount() {\n      var container = this.props.container;\n      this.tooltip = this.renderTooltip();\n      container.appendChild(this.tooltip);\n      this.mountPoints();\n\n      if (!this.isLineRendered()) {\n        this.mountLine();\n      }\n    }\n  }, {\n    key: \"unmount\",\n    value: function unmount() {\n      if (!this.tooltip) {\n        return;\n      }\n\n      var container = this.props.container;\n      this.tooltipForX = undefined;\n      container.removeChild(this.tooltip);\n      this.tooltip = undefined;\n      this.unmountPoints();\n\n      if (this.isLineRendered()) {\n        this.unmountLine();\n      }\n    }\n  }, {\n    key: \"mountLine\",\n    value: function mountLine() {\n      var canvas = this.props.canvas;\n      this.line = this.renderLine();\n      canvas.insertBefore(this.line, canvas.querySelector('polyline'));\n    }\n  }, {\n    key: \"renderTooltip\",\n    value: function renderTooltip() {\n      var y = this.props.y; // Create tooltip.\n\n      var tooltip = document.createElement('div');\n      tooltip.setAttribute('class', 'chartogram__tooltip'); // Add tooltip title.\n\n      var tooltipDate = document.createElement('h1');\n      tooltipDate.setAttribute('class', 'chartogram__tooltip-header');\n      tooltip.appendChild(tooltipDate); // Add graph values.\n\n      var tooltipValues = document.createElement('ul');\n      tooltipValues.setAttribute('class', 'chartogram__tooltip-values');\n      tooltip.appendChild(tooltipValues); // Add graph values.\n\n      for (var _iterator3 = y, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n        var _ref3;\n\n        if (_isArray3) {\n          if (_i3 >= _iterator3.length) break;\n          _ref3 = _iterator3[_i3++];\n        } else {\n          _i3 = _iterator3.next();\n          if (_i3.done) break;\n          _ref3 = _i3.value;\n        }\n\n        var _ref4 = _ref3,\n            isShown = _ref4.isShown,\n            color = _ref4.color;\n\n        if (isShown) {\n          // Add graph value item.\n          var tooltipValueItem = document.createElement('li');\n          tooltipValueItem.style.color = color;\n          tooltipValues.appendChild(tooltipValueItem); // Add graph value.\n\n          var tooltipValue = document.createElement('div');\n          tooltipValueItem.appendChild(tooltipValue); // Add graph name.\n\n          var tooltipName = document.createElement('div');\n          tooltipValueItem.appendChild(tooltipName);\n        }\n      }\n\n      return tooltip;\n    }\n  }, {\n    key: \"renderLine\",\n    value: function renderLine() {\n      var line = document.createElementNS(SVG_XMLNS, 'line');\n      line.setAttribute('class', 'chartogram__tooltip-line');\n      return line;\n    }\n  }, {\n    key: \"isLineRendered\",\n    value: function isLineRendered() {\n      var canvas = this.props.canvas;\n      return this.line && this.line.parentNode === canvas;\n    }\n  }, {\n    key: \"renderPoints\",\n    value: function renderPoints() {\n      var points = [];\n      var _this$props4 = this.props,\n          pointsContainer = _this$props4.pointsContainer,\n          y = _this$props4.y;\n\n      for (var _iterator4 = y, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n        var _ref5;\n\n        if (_isArray4) {\n          if (_i4 >= _iterator4.length) break;\n          _ref5 = _iterator4[_i4++];\n        } else {\n          _i4 = _iterator4.next();\n          if (_i4.done) break;\n          _ref5 = _i4.value;\n        }\n\n        var _y = _ref5;\n\n        if (_y.isShown) {\n          var point = document.createElement('div');\n          point.setAttribute('class', 'chartogram__tooltip-point');\n          point.style.color = _y.color;\n          points.push(point);\n          pointsContainer.appendChild(point);\n        }\n      }\n\n      return points;\n    }\n  }, {\n    key: \"updateTooltip\",\n    value: function updateTooltip(x, xIndex, canvasWidth) {\n      var _this$props5 = this.props,\n          minX = _this$props5.minX,\n          maxX = _this$props5.maxX;\n      var xRatio = (x - minX) / (maxX - minX);\n      this.updateTooltipXValue(x);\n      this.updateTooltipYValues(xIndex);\n      this.updateTooltipPosition(xRatio, canvasWidth);\n      this.updatePointPositions(xIndex, xRatio);\n      this.updateLinePosition(x);\n    }\n  }, {\n    key: \"updateTooltipPosition\",\n    value: function updateTooltipPosition(xRatio, canvasWidth) {\n      var _this$props6 = this.props,\n          tooltipShift = _this$props6.tooltipShift,\n          maxOverflow = _this$props6.maxOverflow;\n      var left = Math.round(xRatio * canvasWidth);\n      left -= tooltipShift === undefined ? 40 : tooltipShift; // Don't overflow the tooltip while measuring its `offsetWidth`\n      // because tooltip values will wrap in case of overflow relative to the canvas width.\n\n      this.tooltip.style.left = 0; // Reset side margin.\n\n      this.tooltip.parentNode.style.marginRight = 0; // Measure tooltip width with the updated content.\n\n      var tooltipWidth = this.tooltip.getBoundingClientRect().width; // `.offsetWidth` returns a slightly incorrect (rounded) value.\n      // const tooltipWidth = this.tooltip.offsetWidth\n\n      var maxSideOverflow = maxOverflow === undefined ? 5 : maxOverflow;\n      var overflow = 0;\n\n      if (left < 0) {\n        overflow = -1 * Math.min(-1 * left, maxSideOverflow);\n        left = 0;\n      } else if (left > canvasWidth - tooltipWidth) {\n        overflow = Math.min(left - (canvasWidth - tooltipWidth), maxSideOverflow);\n        left = canvasWidth - tooltipWidth;\n      } // The values list will wrap in case of overflow relative to the canvas width.\n\n\n      this.tooltip.style.left = left + overflow + 'px';\n      this.tooltip.style.marginRight = -overflow + 'px';\n    }\n  }, {\n    key: \"updateTooltipXValue\",\n    value: function updateTooltipXValue(x) {\n      var formatX = this.props.formatX;\n      var tooltipDate = this.tooltip.childNodes[0];\n      tooltipDate.textContent = formatX(x, {\n        long: true\n      });\n    }\n  }, {\n    key: \"updateTooltipYValues\",\n    value: function updateTooltipYValues(xIndex) {\n      var _this$props7 = this.props,\n          y = _this$props7.y,\n          formatY = _this$props7.formatY;\n      var tooltipValues = this.tooltip.childNodes[1];\n      var i = 0;\n\n      for (var _iterator5 = y, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n        var _ref6;\n\n        if (_isArray5) {\n          if (_i5 >= _iterator5.length) break;\n          _ref6 = _iterator5[_i5++];\n        } else {\n          _i5 = _iterator5.next();\n          if (_i5.done) break;\n          _ref6 = _i5.value;\n        }\n\n        var _ref7 = _ref6,\n            isShown = _ref7.isShown,\n            points = _ref7.points,\n            name = _ref7.name;\n\n        if (isShown) {\n          tooltipValues.childNodes[i].childNodes[0].textContent = formatY(points[xIndex]);\n          tooltipValues.childNodes[i].childNodes[1].textContent = name;\n          i++;\n        }\n      }\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexport { Tooltip as default };\n//# sourceMappingURL=Tooltip.js.map","function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { clearElement, divideInterval, throttle } from './utility';\nimport Tooltip from './Tooltip';\nvar SVG_XMLNS = 'http://www.w3.org/2000/svg';\n\nvar Charts =\n/*#__PURE__*/\nfunction () {\n  function Charts(props) {\n    var _this = this;\n\n    _classCallCheck(this, Charts);\n\n    _defineProperty(this, \"onResize\", function (event) {\n      _this.setState({\n        aspectRatio: _this.getCanvasAspectRatio(),\n        canvasWidthPx: _this.canvas.getBoundingClientRect().width\n      });\n    });\n\n    _defineProperty(this, \"onResizeThrottled\", throttle(this.onResize, 33));\n\n    _defineProperty(this, \"mapX\", function (x) {\n      var _this$props = _this.props,\n          canvasWidth = _this$props.canvasWidth,\n          minX = _this$props.minX,\n          maxX = _this$props.maxX;\n      return (x - minX) / (maxX - minX) * canvasWidth;\n    });\n\n    _defineProperty(this, \"mapY\", function (y) {\n      var _this$props2 = _this.props,\n          canvasWidth = _this$props2.canvasWidth,\n          minY = _this$props2.minY,\n          maxY = _this$props2.maxY;\n      var aspectRatio = _this.state.aspectRatio;\n      return (y - minY) / (maxY - minY) * canvasWidth / aspectRatio;\n    });\n\n    this.props = props;\n  }\n\n  _createClass(Charts, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount(rootNode) {\n      this.canvasWrapper = rootNode.querySelector('.chartogram__canvas-wrapper');\n      this.canvas = rootNode.querySelector('.chartogram__canvas');\n      this.xAxis = rootNode.querySelector('.chartogram__x');\n      this.yAxis = rootNode.querySelector('.chartogram__y');\n      this.tooltipContainer = rootNode.querySelector('.chartogram__plan');\n      this.state = {\n        aspectRatio: this.getCanvasAspectRatio(),\n        canvasWidthPx: this.canvas.getBoundingClientRect().width\n      };\n      this.updateAspectRatio();\n      this.mountGridLines();\n      this.mountXAxis();\n      this.mountYAxis();\n      this.mountGraphs();\n      this.tooltip = new Tooltip(this.getTooltipProps());\n      this.tooltip.componentDidMount(rootNode);\n      this.render(); // Add window resize event listener.\n\n      window.addEventListener('resize', this.onResizeThrottled);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // Remove window resize event listener.\n      window.removeEventListener('resize', this.onResizeThrottled);\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(newState) {\n      var previousState = this.state;\n      this.state = _objectSpread({}, this.state, newState);\n      this.componentDidUpdate(this.props, previousState);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(previousProps, previousState) {\n      if (previousState) {\n        if (this.state.aspectRatio !== previousState.aspectRatio) {\n          this.updateAspectRatio(this.state.aspectRatio);\n        } // If canvas width has changed then remount X axis.\n\n\n        if (this.state.canvasWidthPx !== previousState.canvasWidthPx) {\n          clearElement(this.xAxis);\n          this.mountXAxis();\n        }\n      }\n\n      this.render();\n      this.tooltip.props = this.getTooltipProps();\n      this.tooltip.componentDidUpdate();\n    }\n  }, {\n    key: \"getTooltipProps\",\n    value: function getTooltipProps() {\n      return {\n        canvas: this.canvas,\n        container: this.tooltipContainer,\n        pointsContainer: this.canvasWrapper,\n        formatX: this.props.formatX,\n        formatY: this.props.formatY,\n        canvasWidth: this.props.canvasWidth,\n        aspectRatio: this.state.aspectRatio,\n        mapX: this.mapX,\n        fixSvgCoordinate: this.props.fixSvgCoordinate,\n        minX: this.props.minX,\n        maxX: this.props.maxX,\n        maxY: this.props.maxY,\n        xPoints: this.props.xPoints,\n        y: this.props.y\n      };\n    }\n  }, {\n    key: \"updateAspectRatio\",\n    value: function updateAspectRatio() {\n      var aspectRatio = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.aspectRatio;\n      var _this$props3 = this.props,\n          canvasWidth = _this$props3.canvasWidth,\n          fixSvgCoordinate = _this$props3.fixSvgCoordinate; // Set canvas `viewBox`.\n\n      this.canvas.setAttribute('viewBox', \"0 0 \".concat(canvasWidth, \" \").concat(fixSvgCoordinate(canvasWidth / aspectRatio)));\n    }\n  }, {\n    key: \"getCanvasAspectRatio\",\n    value: function getCanvasAspectRatio() {\n      var canvasDimensions = this.canvas.getBoundingClientRect();\n      return canvasDimensions.width / canvasDimensions.height;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          yAxisTickMarksCount = _this$props4.yAxisTickMarksCount,\n          y = _this$props4.y,\n          minX = _this$props4.minX,\n          maxX = _this$props4.maxX,\n          minY = _this$props4.minY,\n          maxY = _this$props4.maxY,\n          maxYGaugeMark = _this$props4.maxYGaugeMark,\n          graphOpacity = _this$props4.graphOpacity; // Calculate grid lines' coordinates.\n\n      var minY_ = minY;\n      var maxY_ = maxYGaugeMark;\n      var yAxisScale = (maxY - minY) / (maxY_ - minY_);\n      var yAxisTickMarks = divideInterval(minY_, maxY_, yAxisTickMarksCount); // Update grid lines.\n\n      yAxisTickMarks.forEach(function (y, i) {\n        return _this2.updateGridLine(i, y);\n      }); // Update graphs.\n\n      var i = 0;\n\n      while (i < y.length) {\n        var _y$i = y[i],\n            isShown = _y$i.isShown,\n            graphPoints = _y$i.graphPoints,\n            color = _y$i.color;\n        var opacity = graphOpacity[i]; // Update graph.\n\n        if (isShown || opacity > 0) {\n          if (this.graphs[i]) {\n            this.updateGraph(i, graphPoints, opacity);\n          } else {\n            this.mountGraph(i, graphPoints, color, opacity);\n          }\n        } else if (this.graphs[i]) {\n          this.unmountGraph(i);\n        }\n\n        i++;\n      } // Update gauges.\n\n\n      this.updateAxes(minX, maxX, minY_, maxY_, yAxisScale);\n    }\n  }, {\n    key: \"renderGraph\",\n    value: function renderGraph(graphPoints, color) {\n      var opacity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      var graph = document.createElementNS(SVG_XMLNS, 'polyline');\n      graph.setAttribute('stroke', color);\n      graph.setAttribute('fill', 'none');\n      graph.setAttribute('class', 'chartogram__graph');\n      this.updateGraph(graph, graphPoints, opacity);\n      return graph;\n    }\n  }, {\n    key: \"renderGridLine\",\n    value: function renderGridLine(y) {\n      var _this$props5 = this.props,\n          fixSvgCoordinate = _this$props5.fixSvgCoordinate,\n          minY = _this$props5.minY,\n          maxY = _this$props5.maxY;\n      var line = document.createElementNS(SVG_XMLNS, 'line');\n      line.setAttribute('class', 'chartogram__grid-line');\n      line.setAttribute('x1', 0);\n      line.setAttribute('x2', '100%');\n      line.setAttribute('y1', fixSvgCoordinate(this.mapY(maxY - y)));\n      line.setAttribute('y2', fixSvgCoordinate(this.mapY(maxY - y)));\n      return line;\n    }\n  }, {\n    key: \"mountGridLines\",\n    value: function mountGridLines() {\n      var yAxisTickMarksCount = this.props.yAxisTickMarksCount;\n      this.gridLines = [];\n      var i = 0;\n\n      while (i < yAxisTickMarksCount) {\n        var line = this.renderGridLine(0);\n        this.gridLines.push(line);\n        this.canvas.appendChild(line);\n        i++;\n      }\n    }\n  }, {\n    key: \"mountXAxis\",\n    value: function mountXAxis() {\n      var xGaugeTickMarksCount = this.getXGaugeTickMarksCount();\n      var i = 0;\n\n      while (i < xGaugeTickMarksCount) {\n        this.xAxis.appendChild(document.createElement('div'));\n        i++;\n      }\n    }\n  }, {\n    key: \"getXGaugeTickMarksCount\",\n    value: function getXGaugeTickMarksCount() {\n      var xAxisTickMarkWidth = this.props.xAxisTickMarkWidth;\n      var canvasWidthPx = this.state.canvasWidthPx;\n      var count = canvasWidthPx / xAxisTickMarkWidth;\n\n      if (count > 2) {\n        count = Math.pow(count - 2, 0.75);\n      } else {\n        count = 0;\n      }\n\n      return 2 + Math.floor(count);\n    }\n  }, {\n    key: \"mountYAxis\",\n    value: function mountYAxis() {\n      var yAxisTickMarksCount = this.props.yAxisTickMarksCount;\n      var i = 0;\n\n      while (i < yAxisTickMarksCount) {\n        var tickMark = document.createElement('div');\n        this.yAxis.appendChild(tickMark);\n        var label = document.createElement('span');\n        label.setAttribute('class', 'chartogram__y__label');\n        tickMark.appendChild(label);\n        i++;\n      }\n    }\n  }, {\n    key: \"mountGraphs\",\n    value: function mountGraphs() {\n      var _this3 = this;\n\n      this.graphs = [];\n      var y = this.props.y;\n      y.forEach(function (_ref, i) {\n        var graphPoints = _ref.graphPoints,\n            color = _ref.color;\n\n        _this3.mountGraph(i, graphPoints, color);\n      });\n    }\n  }, {\n    key: \"mountGraph\",\n    value: function mountGraph(i, graphPoints, color, opacity) {\n      var graph = this.renderGraph(graphPoints, color, opacity);\n      this.graphs[i] = graph;\n      this.canvas.appendChild(graph);\n    }\n  }, {\n    key: \"unmountGraph\",\n    value: function unmountGraph(i) {\n      this.canvas.removeChild(this.graphs[i]);\n      this.graphs[i] = undefined;\n    }\n  }, {\n    key: \"updateGraph\",\n    value: function updateGraph(graph, graphPoints, opacity) {\n      var _this4 = this;\n\n      var _this$props6 = this.props,\n          createPolylinePoints = _this$props6.createPolylinePoints,\n          xGraphPoints = _this$props6.xGraphPoints,\n          maxY = _this$props6.maxY;\n\n      if (typeof graph === 'number') {\n        graph = this.graphs[graph];\n      }\n\n      graph.setAttribute('points', createPolylinePoints(xGraphPoints.map(this.mapX), graphPoints.map(function (y) {\n        return _this4.mapY(maxY - y);\n      })).join(' '));\n\n      if (opacity !== 1) {\n        graph.style.opacity = opacity;\n      }\n    }\n  }, {\n    key: \"updateGridLine\",\n    value: function updateGridLine(i, y) {\n      var _this$props7 = this.props,\n          fixSvgCoordinate = _this$props7.fixSvgCoordinate,\n          maxY = _this$props7.maxY;\n      var line = this.gridLines[i];\n      line.setAttribute('y1', fixSvgCoordinate(this.mapY(maxY - y)));\n      line.setAttribute('y2', fixSvgCoordinate(this.mapY(maxY - y)));\n    }\n  }, {\n    key: \"updateAxes\",\n    value: function updateAxes(minX, maxX, minY, maxY, yAxisScale) {\n      var _this$props8 = this.props,\n          formatX = _this$props8.formatX,\n          formatY = _this$props8.formatY;\n      this.updateAxis(this.xAxis, minX, maxX, formatX);\n      this.updateAxis(this.yAxis, minY, maxY, formatY);\n      this.yAxis.style.height = \"\".concat(100 / yAxisScale, \"%\");\n    }\n  }, {\n    key: \"updateAxis\",\n    value: function updateAxis(gauge, min, max, transform) {\n      var tickMarksCount = gauge.childNodes.length;\n      var i = 0;\n\n      while (i < tickMarksCount) {\n        var tickMark = gauge.childNodes[i];\n        var value = min + i * (max - min) / (tickMarksCount - 1);\n\n        if (transform) {\n          value = transform(value);\n        }\n\n        if (tickMark.firstChild) {\n          // Y axis.\n          tickMark.firstChild.textContent = value;\n        } else {\n          // X axis.\n          tickMark.textContent = value;\n        }\n\n        i++;\n      }\n    }\n  }]);\n\n  return Charts;\n}();\n\nexport { Charts as default };\nCharts.INITIAL_MARKUP = \"\\n\\t<div class=\\\"chartogram__plan-with-axes\\\">\\n\\t\\t<div class=\\\"chartogram__plan\\\">\\n\\t\\t\\t<div class=\\\"chartogram__top-border\\\"></div>\\n\\t\\t\\t<div class=\\\"chartogram__canvas-wrapper\\\">\\n\\t\\t\\t\\t<svg class=\\\"chartogram__canvas\\\"></svg>\\n\\t\\t\\t\\t<div class=\\\"chartogram__x\\\"></div>\\n\\t\\t\\t\\t<div class=\\\"chartogram__y-wrapper\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"chartogram__y\\\"></div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n\";\n//# sourceMappingURL=Charts.js.map","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { clearElement, commaJoin, simplifyGraph, throttle, setUpDrag } from './utility';\nvar TIMELINE_GRAPH_MAX_POINTS = 80;\nvar SVG_XMLNS = 'http://www.w3.org/2000/svg';\n\nvar Timeline =\n/*#__PURE__*/\nfunction () {\n  function Timeline(props) {\n    var _this = this;\n\n    _classCallCheck(this, Timeline);\n\n    _defineProperty(this, \"onResize\", function (event) {\n      _this.setState({\n        aspectRatio: _this.getCanvasAspectRatio()\n      });\n    });\n\n    _defineProperty(this, \"onResizeThrottled\", throttle(this.onResize, 33));\n\n    _defineProperty(this, \"setState\", function (newState) {\n      if (newState.aspectRatio !== _this.state.aspectRatio) {\n        _this.updateAspectRatio(newState.aspectRatio);\n      }\n\n      _this.state = _objectSpread({}, _this.state, newState);\n\n      _this.render();\n    });\n\n    _defineProperty(this, \"_updateBounds\", function () {\n      _this.updateBoundsTimeout = undefined;\n      var from = _this.updateBoundsFrom;\n      var to = _this.updateBoundsTo;\n      _this.updateBoundsFrom = undefined;\n      _this.updateBoundsTo = undefined; // Update bounds.\n\n      _this.props.onChangeBounds(from, to);\n\n      _this.props.fromRatio = from;\n      _this.props.toRatio = to;\n\n      _this.onChangeBounds(from, to);\n    });\n\n    _defineProperty(this, \"mapX\", function (x) {\n      var _this$props = _this.props,\n          canvasWidth = _this$props.canvasWidth,\n          data = _this$props.data;\n      var minX = data.minX,\n          maxX = data.maxX;\n      return (x - minX) / (maxX - minX) * canvasWidth;\n    });\n\n    _defineProperty(this, \"mapY\", function (y) {\n      var _this$props2 = _this.props,\n          canvasWidth = _this$props2.canvasWidth,\n          minY = _this$props2.minY,\n          maxY = _this$props2.maxY;\n      var aspectRatio = _this.state.aspectRatio;\n      return (y - minY) / (maxY - minY) * canvasWidth / aspectRatio;\n    });\n\n    _defineProperty(this, \"setUpTimelineWindowHandle\", function (side) {\n      var handle = side === 'left' ? _this.timelineWindowLeftHandle : _this.timelineWindowRightHandle;\n      var handleWidth = parseFloat(getComputedStyle(_this.timelineWindow).borderLeftWidth);\n      var timelineCoordinates;\n      var minX;\n      var maxX;\n      var deltaX;\n      var startedX;\n\n      var onDrag = function onDrag(x) {\n        x -= deltaX;\n        x = Math.max(Math.min(x, maxX), minX);\n        var ratio = (x - timelineCoordinates.left) / timelineCoordinates.width; // Due to CSS em -> px rounding precision `ratio` may\n        // sometimes be out of bounds on the edges of the timeline.\n        // For example, for the right timeline window handle\n        // its width may be \"6.39844\" but the collapsed timeline window\n        // width may be \"12.796875\" which is \"6.3984375\" x2.\n\n        ratio = Math.min(Math.max(ratio, 0), 1);\n\n        if (side === 'left') {\n          _this.updateBounds(ratio, _this.props.toRatio);\n        } else {\n          _this.updateBounds(_this.props.fromRatio, ratio);\n        }\n      };\n\n      var onDragStart = function onDragStart(x) {\n        timelineCoordinates = _this.timeline.getBoundingClientRect();\n\n        var timelineWindowCoordinates = _this.timelineWindow.getBoundingClientRect();\n\n        if (side === 'left') {\n          minX = timelineCoordinates.left;\n          maxX = timelineWindowCoordinates.left + timelineWindowCoordinates.width - 2 * handleWidth;\n          deltaX = x - timelineWindowCoordinates.left;\n        } else {\n          minX = timelineWindowCoordinates.left + 2 * handleWidth;\n          maxX = timelineCoordinates.left + timelineCoordinates.width;\n          deltaX = x - (timelineWindowCoordinates.left + timelineWindowCoordinates.width);\n        }\n      };\n\n      return setUpDrag(handle, onDragStart, onDrag);\n    });\n\n    _defineProperty(this, \"setUpTimelineWindow\", function () {\n      var timelineCoordinates;\n      var timelineWindowCoordinates;\n      var minX;\n      var maxX;\n      var innerX;\n\n      var onDrag = function onDrag(x) {\n        x -= innerX;\n        x = Math.max(Math.min(x, maxX), minX);\n        var ratio = (x - timelineCoordinates.left) / timelineCoordinates.width;\n\n        _this.updateBounds(ratio, ratio + timelineWindowCoordinates.width / timelineCoordinates.width);\n      };\n\n      var onDragStart = function onDragStart(x) {\n        timelineCoordinates = _this.timeline.getBoundingClientRect();\n        timelineWindowCoordinates = _this.timelineWindow.getBoundingClientRect();\n        innerX = x - timelineWindowCoordinates.left;\n        minX = timelineCoordinates.left;\n        maxX = timelineCoordinates.left + (timelineCoordinates.width - timelineWindowCoordinates.width);\n      };\n\n      return setUpDrag(_this.timelineWindowDrag, onDragStart, onDrag);\n    });\n\n    _defineProperty(this, \"setTimelineWindowLeft\", function (ratio) {\n      _this.timelineOverlayLeft.style.right = \"\".concat(100 * (1 - ratio), \"%\");\n      _this.timelineWindow.style.left = \"\".concat(100 * ratio, \"%\");\n    });\n\n    _defineProperty(this, \"setTimelineWindowRight\", function (ratio) {\n      _this.timelineOverlayRight.style.left = \"\".concat(100 * ratio, \"%\");\n      _this.timelineWindow.style.right = \"\".concat(100 * (1 - ratio), \"%\");\n    });\n\n    this.props = props;\n  }\n\n  _createClass(Timeline, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.state = {\n        aspectRatio: this.getCanvasAspectRatio()\n      };\n      this.onChangeBounds(this.props.fromRatio, this.props.toRatio), this.render();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount(rootNode) {\n      this.timeline = rootNode.querySelector('.chartogram__timeline');\n      this.timelineOverlayLeft = rootNode.querySelector('.chartogram__timeline-overlay-left');\n      this.timelineWindowLeftHandle = rootNode.querySelector('.chartogram__timeline-window__left-handle');\n      this.timelineWindow = rootNode.querySelector('.chartogram__timeline-window');\n      this.timelineWindowDrag = rootNode.querySelector('.chartogram__timeline-window__drag');\n      this.timelineWindowRightHandle = rootNode.querySelector('.chartogram__timeline-window__right-handle');\n      this.timelineOverlayRight = rootNode.querySelector('.chartogram__timeline-overlay-right');\n      this.timelineCanvas = rootNode.querySelector('.chartogram__timeline-canvas');\n      this.state = {\n        aspectRatio: this.getCanvasAspectRatio()\n      };\n      this.updateAspectRatio();\n      this.setUpTimelineWindowHandle('left');\n      this.setUpTimelineWindowHandle('right');\n      this.setUpTimelineWindow(); // Add window resize event listener.\n\n      window.addEventListener('resize', this.onResizeThrottled);\n      this.onChangeBounds(this.props.fromRatio, this.props.toRatio);\n      this.mountGraphs();\n      this.render();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // Remove window resize event listener.\n      window.removeEventListener('resize', this.onResizeThrottled);\n\n      if (this.updateBoundsTimeout) {\n        cancelAnimationFrame(this.updateBoundsTimeout);\n      }\n    }\n  }, {\n    key: \"updateAspectRatio\",\n    value: function updateAspectRatio() {\n      var aspectRatio = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.aspectRatio;\n      var _this$props3 = this.props,\n          canvasWidth = _this$props3.canvasWidth,\n          fixSvgCoordinate = _this$props3.fixSvgCoordinate; // Set canvas `viewBox`.\n\n      this.timelineCanvas.setAttribute('viewBox', \"0 0 \".concat(canvasWidth, \" \").concat(fixSvgCoordinate(canvasWidth / aspectRatio)));\n    }\n  }, {\n    key: \"getCanvasAspectRatio\",\n    value: function getCanvasAspectRatio() {\n      var timelineCanvasDimensions = this.timelineCanvas.getBoundingClientRect();\n      return timelineCanvasDimensions.width / timelineCanvasDimensions.height;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          y = _this$props4.y,\n          data = _this$props4.data,\n          graphOpacity = _this$props4.graphOpacity; // Update graphs.\n\n      var i = 0;\n\n      var _loop = function _loop() {\n        var _data$y$i = data.y[i],\n            id = _data$y$i.id,\n            points = _data$y$i.points,\n            color = _data$y$i.color;\n        var isShown = y.find(function (_) {\n          return _.id === id;\n        }).isShown;\n        var opacity = graphOpacity[i]; // Update graph.\n\n        if (isShown || opacity > 0) {\n          var _simplifyGraph = simplifyGraph(data.x.points, points, TIMELINE_GRAPH_MAX_POINTS),\n              _simplifyGraph2 = _slicedToArray(_simplifyGraph, 2),\n              _x = _simplifyGraph2[0],\n              _y = _simplifyGraph2[1];\n\n          if (_this2.graphs[i]) {\n            _this2.updateGraph(i, _x, _y, opacity);\n          } else {\n            _this2.mountGraph(i, _x, _y, color, opacity);\n          }\n        } else if (_this2.graphs[i]) {\n          _this2.unmountGraph(i);\n        }\n\n        i++;\n      };\n\n      while (i < data.y.length) {\n        _loop();\n      }\n    }\n  }, {\n    key: \"renderGraph\",\n    value: function renderGraph(x, y, color) {\n      var opacity = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n      var graph = document.createElementNS(SVG_XMLNS, 'polyline');\n      graph.setAttribute('stroke', color);\n      graph.setAttribute('fill', 'none');\n      this.updateGraph(graph, x, y, opacity);\n      graph.setAttribute('class', 'chartogram__graph');\n      return graph;\n    }\n  }, {\n    key: \"mountGraphs\",\n    value: function mountGraphs() {\n      var _this3 = this;\n\n      this.graphs = [];\n      var data = this.props.data;\n      data.y.forEach(function (_ref, i) {\n        var points = _ref.points,\n            color = _ref.color;\n\n        _this3.mountGraph(i, data.x.points, points, color);\n      });\n    }\n  }, {\n    key: \"mountGraph\",\n    value: function mountGraph(i, x, y, color, opacity) {\n      var graph = this.renderGraph(x, y, color, opacity);\n      this.graphs[i] = graph;\n      this.timelineCanvas.appendChild(graph);\n    }\n  }, {\n    key: \"unmountGraph\",\n    value: function unmountGraph(i) {\n      this.timelineCanvas.removeChild(this.graphs[i]);\n      this.graphs[i] = undefined;\n    }\n  }, {\n    key: \"updateGraph\",\n    value: function updateGraph(graph, x, y, opacity) {\n      var _this4 = this;\n\n      var _this$props5 = this.props,\n          maxY = _this$props5.maxY,\n          createPolylinePoints = _this$props5.createPolylinePoints;\n\n      if (typeof graph === 'number') {\n        graph = this.graphs[graph];\n      }\n\n      graph.setAttribute('points', createPolylinePoints(x.map(this.mapX), y.map(function (y) {\n        return _this4.mapY(maxY - y);\n      })).join(' '));\n\n      if (opacity !== 1) {\n        graph.style.opacity = opacity;\n      }\n    }\n  }, {\n    key: \"onChangeBounds\",\n    value: function onChangeBounds(from, to) {\n      this.setTimelineWindowLeft(from);\n      this.setTimelineWindowRight(to);\n    }\n  }, {\n    key: \"updateBounds\",\n    value: function updateBounds(from, to) {\n      this.updateBoundsFrom = from;\n      this.updateBoundsTo = to;\n\n      if (!this.updateBoundsTimeout) {\n        // Schedule bounds update.\n        this.updateBoundsTimeout = requestAnimationFrame(this._updateBounds);\n      }\n    }\n  }]);\n\n  return Timeline;\n}();\n\nexport { Timeline as default };\nTimeline.INITIAL_MARKUP = \"\\n\\t<div class=\\\"chartogram__timeline\\\">\\n\\t\\t<div class=\\\"chartogram__timeline-canvas-padding\\\">\\n\\t\\t\\t<svg class=\\\"chartogram__timeline-canvas\\\"></svg>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"chartogram__timeline-overlay-left\\\"></div>\\n\\t\\t<div class=\\\"chartogram__timeline-overlay-right\\\"></div>\\n\\t\\t<div class=\\\"chartogram__timeline-window\\\">\\n\\t\\t\\t<button type=\\\"button\\\" class=\\\"chartogram__reset-button chartogram__timeline-window__drag\\\"></button>\\n\\t\\t\\t<button type=\\\"button\\\" class=\\\"chartogram__reset-button chartogram__timeline-window__left-handle\\\"></button>\\n\\t\\t\\t<button type=\\\"button\\\" class=\\\"chartogram__reset-button chartogram__timeline-window__right-handle\\\"></button>\\n\\t\\t</div>\\n\\t</div>\\n\";\n//# sourceMappingURL=Timeline.js.map","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { clearElement } from './utility';\n\nvar Togglers =\n/*#__PURE__*/\nfunction () {\n  function Togglers(props) {\n    var _this = this;\n\n    _classCallCheck(this, Togglers);\n\n    _defineProperty(this, \"renderToggler\", function (_ref) {\n      var id = _ref.id,\n          name = _ref.name,\n          color = _ref.color;\n      var toggler = document.createElement('button');\n      toggler.setAttribute('type', 'button');\n      toggler.setAttribute('class', 'chartogram__chart-toggler' + ' ' + 'chartogram__reset-button'); // Add check.\n\n      var xmlns = 'http://www.w3.org/2000/svg';\n      var check = document.createElementNS(xmlns, 'svg');\n      check.setAttribute('viewBox', '0 0 19 19');\n      check.setAttribute('class', 'chartogram__chart-toggler-check'); // Add background circle.\n\n      var backgroundCircle = document.createElementNS(xmlns, 'circle');\n      backgroundCircle.setAttribute('cx', '9.5');\n      backgroundCircle.setAttribute('cy', '9.5');\n      backgroundCircle.setAttribute('r', '9.5');\n      backgroundCircle.setAttribute('fill', color);\n      check.appendChild(backgroundCircle); // Add check circle.\n\n      var checkCircle = document.createElementNS(xmlns, 'circle');\n      checkCircle.setAttribute('cx', '9.5');\n      checkCircle.setAttribute('cy', '9.5');\n      checkCircle.setAttribute('r', '8');\n      checkCircle.setAttribute('class', 'chartogram__chart-toggler-check-circle'); // Internet Explorer 11 doesn't support SVG transforms set via CSS.\n      // https://stackoverflow.com/questions/21298338/css-transform-on-svg-elements-ie9\n\n      checkCircle.setAttribute('transform', 'scale(0)');\n      check.appendChild(checkCircle); // Add check mark.\n\n      var checkMark = document.createElementNS(xmlns, 'path');\n      checkMark.setAttribute('d', 'M13.64 4.94l-6.2 6.34-1.69-1.9c-.73-.63-1.89.1-1.36 1.06l2 3.38c.3.43 1.04.85 1.78 0 .32-.42 6.31-7.93 6.31-7.93.74-.84-.2-1.58-.84-.95z');\n      checkMark.setAttribute('fill', 'white');\n      checkMark.setAttribute('class', 'chartogram__chart-toggler-check-mark'); // Internet Explorer 11 doesn't support SVG transforms set via CSS.\n      // https://stackoverflow.com/questions/21298338/css-transform-on-svg-elements-ie9\n\n      checkMark.setAttribute('transform', 'scale(1)');\n      check.appendChild(checkMark); // Add checkmark.\n\n      toggler.appendChild(check); // Add graph name.\n\n      toggler.appendChild(document.createTextNode(name)); // On click.\n\n      toggler.addEventListener('click', function () {\n        return _this.onToggle(id, toggler, checkMark, checkCircle);\n      });\n      return toggler;\n    });\n\n    _defineProperty(this, \"onToggle\", function (id, toggler, checkMark, checkCircle) {\n      var onToggle = _this.props.onToggle;\n      var state = onToggle(id); // If the graph wasn't toggled.\n      // (for example, when it's the only graph being displayed)\n\n      if (state === undefined) {\n        if (!toggler.classList.contains(ACTION_DISALLOWED_CSS_CLASS)) {\n          toggler.classList.add(ACTION_DISALLOWED_CSS_CLASS);\n          setTimeout(function () {\n            toggler.classList.remove(ACTION_DISALLOWED_CSS_CLASS);\n          }, 820);\n        }\n\n        return;\n      } // toggler.classList.toggle('chartogram__chart-toggler--on')\n      // Internet Explorer 11 doesn't support SVG transforms set via CSS.\n      // https://stackoverflow.com/questions/21298338/css-transform-on-svg-elements-ie9\n\n\n      if (state) {\n        checkCircle.setAttribute('transform', 'scale(0)');\n        checkMark.setAttribute('transform', 'scale(1)');\n      } else {\n        checkCircle.setAttribute('transform', 'scale(1)');\n        checkMark.setAttribute('transform', 'scale(0)');\n      }\n    });\n\n    this.props = props;\n  }\n\n  _createClass(Togglers, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount(rootNode) {\n      this.togglers = rootNode.querySelector('.chartogram__chart-togglers');\n      this.mount();\n    }\n  }, {\n    key: \"mount\",\n    value: function mount() {\n      var data = this.props.data;\n\n      for (var _iterator = data.y, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref2;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref2 = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref2 = _i.value;\n        }\n\n        var y = _ref2;\n        this.togglers.appendChild(this.renderToggler(y));\n      }\n    }\n  }]);\n\n  return Togglers;\n}();\n\nexport { Togglers as default };\nTogglers.INITIAL_MARKUP = \"\\n\\t<div class=\\\"chartogram__chart-togglers\\\"></div>\\n\";\nvar ACTION_DISALLOWED_CSS_CLASS = 'chartogram__chart-toggler--action-disallowed';\n//# sourceMappingURL=Togglers.js.map","function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar Transition =\n/*#__PURE__*/\nfunction () {\n  function Transition(getState, setState, props) {\n    var _this = this;\n\n    _classCallCheck(this, Transition);\n\n    _defineProperty(this, \"transitions\", []);\n\n    _defineProperty(this, \"tick\", function () {\n      var finishedTransitions;\n\n      var state = _objectSpread({}, _this.getState());\n\n      for (var _iterator = _this.transitions, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var transition = _ref;\n\n        if (transition.tick(state)) {\n          finishedTransitions = finishedTransitions || [];\n          finishedTransitions.push(transition);\n        }\n      }\n\n      _this.setState(state);\n\n      if (finishedTransitions) {\n        _this.transitions = _this.transitions.filter(function (_) {\n          return finishedTransitions.indexOf(_) < 0;\n        });\n      }\n\n      if (_this.transitions.length > 0) {\n        _this.timer = requestAnimationFrame(_this.tick);\n      } else {\n        _this.timer = undefined;\n      }\n    });\n\n    this.getState = getState;\n    this.setState = setState;\n    this.props = props;\n  }\n\n  _createClass(Transition, [{\n    key: \"cleanUp\",\n    value: function cleanUp() {\n      if (this.timer) {\n        cancelAnimationFrame(this.timer);\n        this.timer = undefined;\n      }\n    }\n  }, {\n    key: \"batch\",\n    value: function batch() {\n      this.pendingTransitions = [];\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this2 = this;\n\n      // Find ongoing transitions for these owners and properties.\n      var ongoingTransitions = this.transitions.filter(function (transition) {\n        for (var _iterator2 = _this2.pendingTransitions, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n\n          if (_isArray2) {\n            if (_i2 >= _iterator2.length) break;\n            _ref2 = _iterator2[_i2++];\n          } else {\n            _i2 = _iterator2.next();\n            if (_i2.done) break;\n            _ref2 = _i2.value;\n          }\n\n          var pendingTransition = _ref2;\n\n          if (transition.owner === pendingTransition.owner && transition.property === pendingTransition.property) {\n            return true;\n          }\n        }\n      }); // Stop those ongoing transitions.\n\n      if (ongoingTransitions.length > 0) {\n        var state = _objectSpread({}, this.getState());\n\n        for (var _iterator3 = ongoingTransitions, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n          var _ref3;\n\n          if (_isArray3) {\n            if (_i3 >= _iterator3.length) break;\n            _ref3 = _iterator3[_i3++];\n          } else {\n            _i3 = _iterator3.next();\n            if (_i3.done) break;\n            _ref3 = _i3.value;\n          }\n\n          var transition = _ref3;\n          // Stop the transition at current time.\n          transition.tick(state);\n        }\n\n        this.setState(state); // Remove the transitions from the list.\n\n        this.transitions = this.transitions.filter(function (_) {\n          return ongoingTransitions.indexOf(_) < 0;\n        });\n      } // Set up transitions.\n\n\n      var transitionDuration = this.getTransitionDuration(this.pendingTransitions);\n      this.transitions = this.transitions.concat(this.pendingTransitions.map(function (transition) {\n        return _objectSpread({}, transition, {\n          startedAt: Date.now(),\n          duration: transitionDuration,\n          easing: _this2.props.transitionEasing,\n          fromValue: transition.getter ? transition.getter(_this2.getState()) : _this2.getState()[transition.property],\n          tick: function tick(state) {\n            var elapsed = Date.now() - this.startedAt;\n            var ratio = Math.min(elapsed / this.duration, 1);\n            ratio = EASING[this.easing](ratio);\n            var newValue;\n\n            if (this.getNewValue) {\n              newValue = this.getNewValue(this.fromValue, this.toValue, ratio);\n            } else {\n              newValue = this.fromValue + (this.toValue - this.fromValue) * ratio;\n            }\n\n            if (this.setter) {\n              this.setter(state, newValue);\n            } else {\n              state[this.property] = newValue;\n            }\n\n            return ratio === 1;\n          }\n        });\n      }));\n      this.pendingTransitions = undefined; // Start transitions (if required).\n\n      if (!this.timer) {\n        this.timer = requestAnimationFrame(this.tick);\n      }\n    }\n  }, {\n    key: \"add\",\n    value: function add(owner, property, toValue, arg4) {\n      var getter;\n      var setter;\n\n      if (typeof property !== 'string') {\n        getter = property;\n        setter = toValue;\n        toValue = arg4;\n        property = undefined;\n      }\n\n      this.pendingTransitions.push({\n        owner: owner,\n        property: property,\n        getter: getter,\n        setter: setter,\n        toValue: toValue\n      });\n    }\n  }, {\n    key: \"getTransitionDuration\",\n    value: function getTransitionDuration(pendingTransitions) {\n      var maxTransitionDuration = this.props.transitionDuration;\n      var transitionDuration = maxTransitionDuration; // Adjust transition duration based on `minY` and `maxY`.\n\n      var minYTransition = pendingTransitions.find(function (_) {\n        return _.owner === 'charts' && _.property === 'minY';\n      });\n      var maxYTransition = pendingTransitions.find(function (_) {\n        return _.owner === 'charts' && _.property === 'maxY';\n      });\n\n      if (minYTransition && maxYTransition) {\n        var minYFrom = this.getState().minY;\n        var maxYFrom = this.getState().maxY;\n        var minYTo = minYTransition.toValue;\n        var maxYTo = maxYTransition.toValue;\n        var currentHeight = maxYFrom - minYFrom;\n        var deltaMaxY = Math.abs(maxYTo - maxYFrom) / currentHeight;\n        var deltaMinY = Math.abs(minYTo - minYFrom) / currentHeight;\n        var deltaY = Math.max(deltaMinY, deltaMaxY);\n        transitionDuration = maxTransitionDuration * Math.max(0.2, Math.min(deltaY, 0.5) * 2);\n      }\n\n      return transitionDuration;\n    }\n  }]);\n\n  return Transition;\n}(); // https://gist.github.com/gre/1650294\n\n\nexport { Transition as default };\nvar EASING = {\n  linear: function linear(t) {\n    return t;\n  },\n  easeInOutSin: function easeInOutSin(t) {\n    return (1 + Math.sin(Math.PI * t - Math.PI / 2)) / 2;\n  },\n  easeInOutQuad: function easeInOutQuad(t) {\n    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  },\n  easeInOutCubic: function easeInOutCubic(t) {\n    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n  },\n  easeOutCubic: function easeOutCubic(t) {\n    return --t * t * t + 1;\n  },\n  easeOutQuad: function easeOutQuad(t) {\n    return t * (2 - t);\n  }\n};\n//# sourceMappingURL=Transition.js.map","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { clearElement, commaJoin, roundNumber } from './utility';\nimport Charts from './Charts';\nimport Timeline from './Timeline';\nimport Togglers from './Togglers';\nimport Transition from './Transition';\n\nvar Chartogram =\n/*#__PURE__*/\nfunction () {\n  function Chartogram(rootNode, data) {\n    var _this = this;\n\n    var title = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'Title';\n    var props = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Chartogram);\n\n    _defineProperty(this, \"setState\", function (newState) {\n      var previousState = _this.state;\n      _this.state = _objectSpread({}, _this.state, newState);\n\n      _this.componentDidUpdate(_this.props, previousState);\n    });\n\n    _defineProperty(this, \"onToggle\", function (id) {\n      var i = _this.state.y.findIndex(function (_) {\n        return _.id === id;\n      });\n\n      var y = _this.state.y[i]; // Won't allow hiding all graphs.\n\n      if (y.isShown) {\n        var graphsShown = _this.state.y.filter(function (_) {\n          return _.isShown;\n        });\n\n        if (graphsShown.length === 1) {\n          return;\n        }\n      } // Mutating `this.state` without `setState()` for simplicity.\n\n\n      y.isShown = !y.isShown;\n\n      var _this$calculateMinMax = _this.calculateMinMaxY(_this.state.y),\n          minY = _this$calculateMinMax.minY,\n          maxY = _this$calculateMinMax.maxY,\n          minYGlobal = _this$calculateMinMax.minYGlobal,\n          maxYGlobal = _this$calculateMinMax.maxYGlobal,\n          maxYGaugeMark = _this$calculateMinMax.maxYGaugeMark;\n\n      _this.transition.batch();\n\n      _this.transition.add('charts', 'minY', minY);\n\n      _this.transition.add('charts', 'maxY', maxY);\n\n      _this.transition.add('charts', 'maxYGaugeMark', maxYGaugeMark);\n\n      _this.transition.add('timeline', 'minYGlobal', minYGlobal);\n\n      _this.transition.add('timeline', 'maxYGlobal', maxYGlobal);\n\n      _this.transition.add(\"graph#\".concat(id, \"/opacity\"), function (state) {\n        return state.graphOpacity[i];\n      }, function (state, value) {\n        // Change `graphOpacity` for \"shallow equal\" comparison.\n        state.graphOpacity = state.graphOpacity.slice();\n        state.graphOpacity[i] = value;\n      }, y.isShown ? 1 : 0);\n\n      _this.transition.run();\n\n      return y.isShown;\n    });\n\n    _defineProperty(this, \"onChangeBounds\", function (from, to) {\n      var state = _this.createState(from, to);\n\n      var minY = state.minY;\n      var maxY = state.maxY;\n      var maxYGaugeMark = state.maxYGaugeMark;\n      delete state.minY;\n      delete state.maxY;\n      delete state.maxYGaugeMark;\n\n      _this.setState(state);\n\n      _this.transition.batch();\n\n      _this.transition.add('charts', 'minY', minY);\n\n      _this.transition.add('charts', 'maxY', maxY);\n\n      _this.transition.add('charts', 'maxYGaugeMark', maxYGaugeMark);\n\n      _this.transition.run();\n    });\n\n    _defineProperty(this, \"createPolylinePoints\", function (x, y) {\n      // return commaJoin(x, y)\n      return commaJoin(x.map(_this.fixSvgCoordinate), y.map(_this.fixSvgCoordinate));\n    });\n\n    _defineProperty(this, \"fixSvgCoordinate\", function (x) {\n      var precisionFactor = _this.props.precisionFactor;\n      return Math.round(x * precisionFactor) / precisionFactor;\n    });\n\n    _defineProperty(this, \"formatX\", function (value) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _this$props = _this.props,\n          locale = _this$props.locale,\n          formatX = _this$props.formatX;\n\n      if (formatX) {\n        return formatX(value, options);\n      }\n\n      if (!_this.dateTimeFormatShort) {\n        _this.dateTimeFormatShort = new Intl.DateTimeFormat(locale, {\n          month: 'short',\n          day: 'numeric'\n        });\n        _this.dateTimeFormatLong = new Intl.DateTimeFormat(locale, {\n          weekday: 'short',\n          month: 'short',\n          day: 'numeric'\n        });\n        _this.dateTimeFormatLongWithYear = new Intl.DateTimeFormat(locale, {\n          weekday: 'short',\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric'\n        });\n      }\n\n      var date = new Date(value);\n\n      if (options.long) {\n        // const isSameYear = date.getFullYear() === new Date().getFullYear()\n        // if (isSameYear) {\n        return _this.dateTimeFormatLong.format(date); // } else {\n        // \treturn this.dateTimeFormatLongWithYear.format(date)\n        // }\n      } else {\n        return _this.dateTimeFormatShort.format(date);\n      }\n    });\n\n    _defineProperty(this, \"formatY\", function (value) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _this$props2 = _this.props,\n          locale = _this$props2.locale,\n          formatY = _this$props2.formatY,\n          yAxisPrecision = _this$props2.yAxisPrecision;\n\n      if (formatY) {\n        return formatY(value, options);\n      }\n\n      if (!_this.numberFormat) {\n        _this.numberFormat = new Intl.NumberFormat(locale, {\n          minimumFractionDigits: yAxisPrecision,\n          maximumFractionDigits: yAxisPrecision\n        });\n      }\n\n      var precisionFactor = yAxisPrecision && Math.pow(10, yAxisPrecision);\n\n      if (precisionFactor) {\n        value *= precisionFactor;\n      }\n\n      value = Math.round(value);\n\n      if (precisionFactor) {\n        value /= precisionFactor;\n      }\n\n      return _this.numberFormat.format(value);\n    });\n\n    this.props = _objectSpread({\n      title: title,\n      transitionDuration: 250,\n      transitionEasing: 'easeOutQuad',\n      xAxisTickMarkWidth: 60,\n      yAxisTickMarksCount: 6,\n      yAxisPrecision: 0,\n      timelineWindowSize: 40,\n      canvasWidth: 512,\n      precisionFactor: Math.pow(10, props.precision || 3)\n    }, props);\n    this.rootNode = rootNode;\n    this.data = _objectSpread({}, data, {\n      minX: Math.min.apply(Math, _toConsumableArray(data.x.points)),\n      maxX: Math.max.apply(Math, _toConsumableArray(data.x.points)),\n      y: data.y.map(function (y) {\n        return _objectSpread({}, y, {\n          min: Math.min.apply(Math, _toConsumableArray(y.points)),\n          max: Math.max.apply(Math, _toConsumableArray(y.points))\n        });\n      })\n    });\n    this.transition = new Transition(function () {\n      return _this.state;\n    }, this.setState, this.props);\n  }\n\n  _createClass(Chartogram, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.rootNode.classList.add('chartogram');\n      this.rootNode.innerHTML = \"\\n\\t\\t\\t<header class=\\\"chartogram__header\\\">\\n\\t\\t\\t\\t<h1 class=\\\"chartogram__title\\\">\".concat(this.props.title, \"</h1>\\n\\t\\t\\t</header>\\n\\t\\t\\t\").concat(Charts.INITIAL_MARKUP, \"\\n\\t\\t\\t\").concat(Timeline.INITIAL_MARKUP, \"\\n\\t\\t\\t\").concat(Togglers.INITIAL_MARKUP, \"\\n\\t\\t\"); // Render will be called after `.componentDidMount()`.\n\n      this.state = this.getInitialState();\n      this.charts = new Charts(this.getChartsProps());\n      this.charts.componentDidMount(this.rootNode);\n      this.timeline = new Timeline(this.getTimelineProps());\n      this.timeline.componentDidMount(this.rootNode);\n      this.togglers = new Togglers(this.getTogglersProps());\n      this.togglers.componentDidMount(this.rootNode);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.charts.componentWillUnmount();\n      this.timeline.componentWillUnmount();\n      this.transition.cleanUp();\n      this.rootNode.classList.remove('chartogram');\n      clearElement(this.rootNode);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(previousProps, previousState) {\n      this.charts.props = this.getChartsProps();\n      this.charts.componentDidUpdate();\n\n      if (this.shouldUpdateTimeline(previousState)) {\n        this.timeline.props = this.getTimelineProps();\n        this.timeline.componentDidUpdate();\n      }\n    }\n  }, {\n    key: \"shouldUpdateTimeline\",\n    value: function shouldUpdateTimeline(previousState) {\n      return this.state.graphOpacity !== previousState.graphOpacity || this.state.minYGlobal !== previousState.minYGlobal || this.state.maxYGlobal !== previousState.maxYGlobal;\n    }\n  }, {\n    key: \"getChartsProps\",\n    value: function getChartsProps() {\n      return _objectSpread({}, this.props, this.state, {\n        createPolylinePoints: this.createPolylinePoints,\n        fixSvgCoordinate: this.fixSvgCoordinate,\n        formatX: this.formatX,\n        formatY: this.formatY\n      });\n    }\n  }, {\n    key: \"getTimelineProps\",\n    value: function getTimelineProps() {\n      return {\n        data: this.data,\n        canvasWidth: this.props.canvasWidth,\n        fixSvgCoordinate: this.fixSvgCoordinate,\n        createPolylinePoints: this.createPolylinePoints,\n        fromRatio: this.state.fromRatio,\n        toRatio: this.state.toRatio,\n        minY: this.state.minYGlobal,\n        maxY: this.state.maxYGlobal,\n        y: this.state.y,\n        graphOpacity: this.state.graphOpacity,\n        onChangeBounds: this.onChangeBounds\n      };\n    }\n  }, {\n    key: \"getTogglersProps\",\n    value: function getTogglersProps() {\n      return {\n        data: this.data,\n        onToggle: this.onToggle\n      };\n    }\n  }, {\n    key: \"getInitialState\",\n    value: function getInitialState() {\n      var timelineWindowSize = this.props.timelineWindowSize;\n      var _this$data = this.data,\n          minX = _this$data.minX,\n          maxX = _this$data.maxX;\n      var fromIndex;\n\n      if (this.data.x.points.length > timelineWindowSize) {\n        fromIndex = this.data.x.points.length - timelineWindowSize;\n      } else {\n        fromIndex = 0;\n      }\n\n      var xFrom = this.data.x.points[fromIndex];\n      var fromRatio = (xFrom - minX) / (maxX - minX);\n      var toRatio = 1;\n      return _objectSpread({}, this.createState(fromRatio, toRatio), {\n        graphOpacity: this.data.y.map(function (_) {\n          return 1;\n        })\n      });\n    }\n  }, {\n    key: \"createState\",\n    value: function createState(fromRatio, toRatio) {\n      var _this2 = this;\n\n      var x = this.data.x;\n      var minX = this.data.minX + fromRatio * (this.data.maxX - this.data.minX);\n      var maxX = this.data.minX + toRatio * (this.data.maxX - this.data.minX);\n      var fromIndex;\n\n      if (minX === this.data.minX) {\n        fromIndex = 0;\n      } else {\n        fromIndex = x.points.findIndex(function (x) {\n          return x > minX;\n        }) - 1;\n      }\n\n      var toIndex;\n\n      if (maxX === this.data.maxX) {\n        toIndex = x.points.length - 1;\n      } else {\n        toIndex = x.points.findIndex(function (x) {\n          return x > maxX;\n        });\n      }\n\n      var xPoints = x.points.slice(fromIndex, toIndex + 1);\n      var xGraphPoints = xPoints.slice(); // Create X graph points.\n\n      if (xPoints.length >= 2) {\n        if (x.points[fromIndex] !== minX) {\n          xGraphPoints[0] = minX;\n        }\n\n        if (x.points[toIndex] !== maxX) {\n          xGraphPoints[xGraphPoints.length - 1] = maxX;\n        }\n      }\n\n      var y = this.data.y.map(function (y, i) {\n        var points = _this2.data.y[i].points.slice(fromIndex, toIndex + 1);\n\n        var graphPoints = points.slice();\n\n        if (xPoints.length >= 2) {\n          if (x.points[fromIndex] !== minX) {\n            var beforeStartY = _this2.data.y[i].points[fromIndex];\n            var startY = _this2.data.y[i].points[fromIndex + 1];\n            var fromXExcludedTickRatio = (minX - _this2.data.x.points[fromIndex]) / (_this2.data.x.points[fromIndex + 1] - _this2.data.x.points[fromIndex]);\n            var startPoint = beforeStartY + (startY - beforeStartY) * fromXExcludedTickRatio;\n            graphPoints[0] = startPoint;\n          }\n\n          if (x.points[toIndex] !== maxX) {\n            var afterEndY = _this2.data.y[i].points[toIndex];\n            var endY = _this2.data.y[i].points[toIndex - 1];\n            var toXIncludedTickRatio = (maxX - _this2.data.x.points[toIndex - 1]) / (_this2.data.x.points[toIndex] - _this2.data.x.points[toIndex - 1]);\n            var endPoint = endY + (afterEndY - endY) * toXIncludedTickRatio;\n            graphPoints[graphPoints.length - 1] = endPoint;\n          }\n        }\n\n        return _objectSpread({}, _this2.data.y[i], _this2.state ? _this2.state.y[i] : {\n          isShown: true\n        }, {\n          points: points,\n          graphPoints: graphPoints,\n          // Min Y is always 0 by design.\n          min: 0,\n          // min: Math.min(...graphPoints),\n          max: Math.max.apply(Math, _toConsumableArray(graphPoints))\n        });\n      });\n      return _objectSpread({\n        minX: minX,\n        maxX: maxX,\n        fromIndex: fromIndex,\n        toIndex: toIndex,\n        fromRatio: fromRatio,\n        toRatio: toRatio,\n        xPoints: xPoints,\n        xGraphPoints: xGraphPoints\n      }, this.calculateMinMaxY(y), {\n        y: y\n      });\n    }\n  }, {\n    key: \"calculateMinMaxY\",\n    value: function calculateMinMaxY(y) {\n      var _this$props3 = this.props,\n          yAxisTickMarksCount = _this$props3.yAxisTickMarksCount,\n          yAxisPrecision = _this$props3.yAxisPrecision; // Calculate visible min/max Y for the graphs being shown.\n\n      var minY = Infinity;\n      var maxY = -Infinity;\n\n      for (var _iterator = y, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var _y = _ref;\n\n        if (_y.isShown) {\n          minY = Math.min(minY, _y.min);\n          maxY = Math.max(maxY, _y.max);\n        }\n      } // Calculate global min/max Y for the graphs being shown.\n\n\n      var minYGlobal = Infinity;\n      var maxYGlobal = -Infinity;\n\n      var _loop = function _loop() {\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) return \"break\";\n          _ref2 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) return \"break\";\n          _ref2 = _i2.value;\n        }\n\n        var _y = _ref2;\n        var isShown = y.find(function (_) {\n          return _.id === _y.id;\n        }).isShown;\n\n        if (isShown) {\n          minYGlobal = Math.min(minYGlobal, _y.min);\n          maxYGlobal = Math.max(maxYGlobal, _y.max);\n        }\n      };\n\n      for (var _iterator2 = this.data.y, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n\n        var _ret = _loop();\n\n        if (_ret === \"break\") break;\n      }\n\n      var maxYGaugeMark = roundNumber(maxY, yAxisTickMarksCount - 1, yAxisPrecision);\n      maxY = Math.max(maxY, maxYGaugeMark); // Min Y is always 0 by design.\n\n      minYGlobal = 0;\n      return {\n        minY: minY,\n        maxY: maxY,\n        minYGlobal: minYGlobal,\n        maxYGlobal: maxYGlobal,\n        maxYGaugeMark: maxYGaugeMark\n      };\n    }\n  }]);\n\n  return Chartogram;\n}();\n\nexport { Chartogram as default };\n//# sourceMappingURL=Chartogram.js.map","import Chartogram from './Chartogram';\nexport default function chartogram(rootNode, data, title, options) {\n  var chartogram = new Chartogram(rootNode, data, title, options);\n  chartogram.componentDidMount();\n  return function () {\n    chartogram.componentWillUnmount();\n  };\n}\n//# sourceMappingURL=index.js.map"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","clearElement","element","firstChild","removeChild","roundNumber","n","count","precision","precisionFactor","Math","pow","delta","x","maxDigits","arguments","undefined","factor","digitCount","log10","getDigitCount","rounded","roundDecimalBy","round","roundDecimal","ROUND_DECIMAL_HIGH_FACTOR","ROUND_DECIMAL_LOW_FACTOR","remainder","throttle","func","interval","timeout","executedAt","scheduled","Date","now","remaining","clearTimeout","setTimeout","setUpDrag","onDragStart","onDrag","onTouchMove","event","changedTouches","clientX","clientY","onPointerMove","onDragStop","window","removeEventListener","onTouchStart","touches","addEventListener","onPointerDown","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_defineProperty","obj","value","Tooltip","_this","this","instance","Constructor","_classCallCheck","_onTrackStart","_onTrack","_onTrackStop","elementBounds","onTrack","y","onTrackStart","getBoundingClientRect","onTrackStop","left","width","top","height","onPointerEnter","setUpTouchMove","canvas","unmount","screenX","screenY","canvasDimensions","xIndex","_this$props","minX","maxX","xPoints","xPoint","xHigherIndex","findIndex","_","xLowerIndex","xLower","xHigher","tooltipForX","tooltip","mount","updateTooltip","line","pointsContainer","points","renderPoints","_iterator","_isArray","_i","_ref","next","done","point","appendChild","_iterator2","_isArray2","_i2","_ref2","isLineRendered","mountLine","_this$props2","fixSvgCoordinate","canvasWidth","aspectRatio","mapX","setAttribute","xRatio","_this$props3","maxY","j","isShown","yRatio","style","concat","bottom","protoProps","staticProps","unlisten","setUpListener","container","renderTooltip","mountPoints","unmountPoints","unmountLine","renderLine","insertBefore","querySelector","document","createElement","tooltipDate","tooltipValues","_iterator3","_isArray3","_i3","_ref3","_ref4","color","tooltipValueItem","tooltipValue","tooltipName","createElementNS","parentNode","_this$props4","_iterator4","_isArray4","_i4","_ref5","_y","push","_this$props5","updateTooltipXValue","updateTooltipYValues","updateTooltipPosition","updatePointPositions","updateLinePosition","_this$props6","tooltipShift","maxOverflow","marginRight","tooltipWidth","maxSideOverflow","overflow","min","formatX","childNodes","textContent","long","_this$props7","formatY","_iterator5","_isArray5","_i5","_ref6","_ref7","name","Charts","setState","getCanvasAspectRatio","canvasWidthPx","onResize","minY","state","rootNode","canvasWrapper","xAxis","yAxis","tooltipContainer","updateAspectRatio","mountGridLines","mountXAxis","mountYAxis","mountGraphs","getTooltipProps","componentDidMount","render","onResizeThrottled","newState","previousState","source","ownKeys","keys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","forEach","_objectSpread","componentDidUpdate","previousProps","_this2","yAxisTickMarksCount","maxYGaugeMark","graphOpacity","minY_","maxY_","yAxisScale","max","GAUGE_TICK_MARKS_COUNT","divideInterval","updateGridLine","_y$i","graphPoints","opacity","graphs","updateGraph","mountGraph","unmountGraph","updateAxes","graph","mapY","gridLines","renderGridLine","xGaugeTickMarksCount","getXGaugeTickMarksCount","xAxisTickMarkWidth","floor","tickMark","label","_this3","renderGraph","_this4","createPolylinePoints","xGraphPoints","map","join","_this$props8","updateAxis","gauge","transform","tickMarksCount","_slicedToArray","_arrayWithHoles","_arr","_n","_d","_e","_s","err","_iterableToArrayLimit","_nonIterableRest","INITIAL_MARKUP","Timeline","updateBoundsTimeout","updateBoundsFrom","to","updateBoundsTo","onChangeBounds","fromRatio","toRatio","data","side","timelineCoordinates","deltaX","handle","timelineWindowLeftHandle","timelineWindowRightHandle","handleWidth","parseFloat","getComputedStyle","timelineWindow","borderLeftWidth","timeline","timelineWindowCoordinates","ratio","updateBounds","innerX","timelineWindowDrag","timelineOverlayLeft","right","timelineOverlayRight","timelineCanvas","setUpTimelineWindowHandle","setUpTimelineWindow","cancelAnimationFrame","timelineCanvasDimensions","_loop","_data$y$i","id","find","_simplifyGraph2","simplifyGraph","maxPoints","yMax","apply","threshold","_x","slice","y0","abs","setTimelineWindowLeft","setTimelineWindowRight","requestAnimationFrame","_updateBounds","Togglers","toggler","xmlns","check","backgroundCircle","checkCircle","checkMark","createTextNode","onToggle","classList","contains","ACTION_DISALLOWED_CSS_CLASS","add","remove","togglers","renderToggler","Transition","getState","finishedTransitions","transitions","transition","tick","indexOf","timer","pendingTransitions","ongoingTransitions","pendingTransition","owner","property","transitionDuration","getTransitionDuration","startedAt","duration","easing","transitionEasing","fromValue","getter","newValue","elapsed","EASING","getNewValue","toValue","setter","arg4","maxTransitionDuration","minYTransition","maxYTransition","minYFrom","maxYFrom","minYTo","maxYTo","currentHeight","deltaMaxY","deltaMinY","deltaY","linear","t","easeInOutSin","sin","PI","easeInOutQuad","easeInOutCubic","easeOutCubic","easeOutQuad","Chartogram","title","_this$calculateMinMax","calculateMinMaxY","minYGlobal","maxYGlobal","batch","run","createState","a","b","ai","options","locale","dateTimeFormatShort","Intl","DateTimeFormat","month","day","dateTimeFormatLong","weekday","dateTimeFormatLongWithYear","year","date","format","yAxisPrecision","numberFormat","NumberFormat","minimumFractionDigits","maximumFractionDigits","timelineWindowSize","innerHTML","getInitialState","charts","getChartsProps","getTimelineProps","getTogglersProps","componentWillUnmount","cleanUp","shouldUpdateTimeline","fromIndex","_this$data","toIndex","beforeStartY","startPoint","afterEndY","endY","endPoint","Infinity","chartogram"],"mappings":"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"}